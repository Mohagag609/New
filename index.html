<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù† - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª">
    <meta name="keywords" content="Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù‚Ø§Ø±Ø§Øª, Ø¹Ù‚Ø§Ø±Ø§Øª, Ø§Ø³ØªØ«Ù…Ø§Ø±, Ù…Ø¯ÙÙˆØ¹Ø§Øª, Ø£Ù‚Ø³Ø§Ø·">
    <meta name="author" content="Estate Manager Pro">
    
    <title>Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø³Ù†</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ›ï¸</text></svg>">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="js/app.js" as="script">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Meta tags for better SEO and social sharing -->
    <meta property="og:title" content="Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø³Ù†">
    <meta property="og:description" content="Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù† - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ar_EG">
    
    <!-- Security headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#2563eb">
    <meta name="msapplication-TileColor" content="#2563eb">
    
    <!-- Apple touch icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ›ï¸</text></svg>">
</head>
<body>
    <!-- Loading screen -->
    <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--bg);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.3s ease;
    ">
        <div style="text-align: center; color: var(--ink);">
            <div style="
                width: 60px;
                height: 60px;
                margin: 0 auto 20px;
                background: linear-gradient(135deg, #0ea5e9, #6366f1);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                animation: pulse 2s infinite;
            ">ğŸ›ï¸</div>
            <h2 style="margin: 0 0 10px 0; font-size: 24px;">Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ</h2>
            <p style="margin: 0; color: var(--muted);">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
            <div class="spinner" style="margin: 20px auto 0;"></div>
        </div>
    </div>

    <!-- Main application container (will be populated by JavaScript) -->
    <div id="app-container"></div>

    <!-- Error boundary -->
    <div id="error-boundary" style="display: none;">
        <div class="container">
            <div class="card" style="text-align: center; margin-top: 50px;">
                <h2 style="color: var(--warn); margin-bottom: 16px;">âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£</h2>
                <p style="color: var(--muted); margin-bottom: 20px;">
                    Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.
                </p>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„</button>
                    <button class="btn secondary" onclick="localStorage.clear(); location.reload();">
                        Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Offline indicator -->
    <div id="offline-indicator" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: var(--warn);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        display: none;
        z-index: 1000;
    ">
        ğŸ”Œ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
    </div>

    <!-- Scripts -->
    <script type="module">
        // Global error handler
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
            showErrorBoundary(event.error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
            showErrorBoundary(event.reason);
        });

        function showErrorBoundary(error) {
            const loadingScreen = document.getElementById('loading-screen');
            const appContainer = document.getElementById('app-container');
            const errorBoundary = document.getElementById('error-boundary');
            
            if (loadingScreen) loadingScreen.style.display = 'none';
            if (appContainer) appContainer.style.display = 'none';
            if (errorBoundary) errorBoundary.style.display = 'block';
        }

        // Online/offline detection
        function updateOnlineStatus() {
            const indicator = document.getElementById('offline-indicator');
            if (navigator.onLine) {
                indicator.style.display = 'none';
            } else {
                indicator.style.display = 'block';
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        updateOnlineStatus();

        // Load main application
        async function loadApp() {
            try {
                const { default: EstateManagerApp } = await import('./js/app.js');
                // Hide loading screen after app is loaded
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen) {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 300);
                    }
                }, 500);
            } catch (error) {
                console.error('Failed to load application:', error);
                showErrorBoundary(error);
            }
        }
        
        // Start the app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadApp);
        } else {
            loadApp();
        }
    </script>

    <!-- Service Worker Registration (for future PWA support) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Service worker registration can be added here in the future
                console.log('Service Worker support detected');
            });
        }
    </script>

    <!-- CSS Animation for loading screen -->
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Smooth transitions for theme changes */
        * {
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        
        /* Focus management for accessibility */
        :focus-visible {
            outline: 2px solid var(--brand);
            outline-offset: 2px;
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</body>
</html>

